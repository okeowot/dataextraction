import re
import argparse
import urllib.request
from pypdf import PdfReader

def fetchincidents(url):
  # url = "https://www.normanok.gov/sites/default/files/documents/2023-02/2023-02-23_daily_arrest_summary.pdf"
   headers = {}
   headers['User-Agent'] = "Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.27 Safari/537.17"
   data = urllib.request.urlopen(urllib.request.Request(url, headers=headers)).read()
   return data

def extractincidents(data):
    with open("myfile.pdf", "wb") as f:
    	f.write(data)                   # you can use the open() function with the wb mode to open a file in binary write mode and write the contents of the file-like object to it)
    reader = PdfReader("myfile.pdf")
    number_of_pages = len(reader.pages) #get the number of pages of the PDF file.
    for page_number in range(number_of_pages - 1):   #for loop to print data on pages of PDF.
      page = reader.pages[page_number]   #reads data on each page of PDF
      page_text = page.extract_text()  #extract text from all the pages
      split_into_lines = page_text.splitlines() #split page_text into lines
      for lines in split_into_lines:
       if re.match(r"^/D",lines):
	    
        #regex = "stop"
        #edited_lines = re.findall(regex, lines)
        #pattern = re.compile
        #regex = "stop"
        #edited_lines = re.findall(regex, line_string)
       print(lines[0]) 
    #print(edited_lines)
#     print(edited_pages.extract_text())
